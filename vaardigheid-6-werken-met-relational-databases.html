<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio</title>
  <meta name="description" content="8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"/>
<link rel="next" href="vaardigheid-7-een-r-package-maken.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="portfolio_style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introductie</a></li>
<li class="chapter" data-level="2" data-path="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><a href="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><i class="fa fa-check"></i><b>2</b> Vaardigheid 1: Semi-reproduceerbare data analyseren</a>
<ul>
<li class="chapter" data-level="2.1" data-path="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><a href="vaardigheid-1-semi-reproduceerbare-data-analyseren.html#c.-elegans-kweekplaat-experiment"><i class="fa fa-check"></i><b>2.1</b> <em>C. elegans</em> kweekplaat experiment</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><a href="vaardigheid-1-semi-reproduceerbare-data-analyseren.html#normalisatie-met-het-drc-package"><i class="fa fa-check"></i><b>2.1.1</b> Normalisatie met het {drc} package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vaardigheid-2-open-source-analyse-reproduceren.html"><a href="vaardigheid-2-open-source-analyse-reproduceren.html"><i class="fa fa-check"></i><b>3</b> Vaardigheid 2: Open Source analyse reproduceren</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vaardigheid-2-open-source-analyse-reproduceren.html"><a href="vaardigheid-2-open-source-analyse-reproduceren.html#ripeta-criteria"><i class="fa fa-check"></i><b>3.1</b> Ripeta criteria</a></li>
<li class="chapter" data-level="3.2" data-path="vaardigheid-2-open-source-analyse-reproduceren.html"><a href="vaardigheid-2-open-source-analyse-reproduceren.html#analyse-reproduceren"><i class="fa fa-check"></i><b>3.2</b> Analyse reproduceren</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vaardigheid-3-folder-structuur-gebruiken-volgens-de-guerilla-principles.html"><a href="vaardigheid-3-folder-structuur-gebruiken-volgens-de-guerilla-principles.html"><i class="fa fa-check"></i><b>4</b> Vaardigheid 3: Folder structuur gebruiken volgens de Guerilla Principles</a></li>
<li class="chapter" data-level="5" data-path="vaardigheid-4-opmaken-met-rmarkdown-en-html-syntax.html"><a href="vaardigheid-4-opmaken-met-rmarkdown-en-html-syntax.html"><i class="fa fa-check"></i><b>5</b> Vaardigheid 4: Opmaken met RMarkdown en HTML syntax</a></li>
<li class="chapter" data-level="6" data-path="portfolio-assignment-3.2-plan-van-aanpak-vrije-besteding.html"><a href="portfolio-assignment-3.2-plan-van-aanpak-vrije-besteding.html"><i class="fa fa-check"></i><b>6</b> Portfolio assignment 3.2: Plan van Aanpak vrije besteding</a></li>
<li class="chapter" data-level="7" data-path="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"><a href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"><i class="fa fa-check"></i><b>7</b> Vaardigheid 5: Correct refereren m.b.v. een <em>reference manager</em></a>
<ul>
<li class="chapter" data-level="7.1" data-path="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"><a href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html#dsfb2-2022-project-regenwormen-introductie"><i class="fa fa-check"></i><b>7.1</b> DSFB2 2022 Project Regenwormen: Introductie</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vaardigheid-6-werken-met-relational-databases.html"><a href="vaardigheid-6-werken-met-relational-databases.html"><i class="fa fa-check"></i><b>8</b> Vaardigheid 6: Werken met <em>relational databases</em></a>
<ul>
<li class="chapter" data-level="8.1" data-path="vaardigheid-6-werken-met-relational-databases.html"><a href="vaardigheid-6-werken-met-relational-databases.html#samenvoegen-van-virus-activiteit-dummy-data-met-gapminder-dataset"><i class="fa fa-check"></i><b>8.1</b> Samenvoegen van virus-activiteit dummy data met gapminder dataset</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="vaardigheid-7-een-r-package-maken.html"><a href="vaardigheid-7-een-r-package-maken.html"><i class="fa fa-check"></i><b>9</b> Vaardigheid 7: Een R package maken</a></li>
<li class="chapter" data-level="10" data-path="vaardigheid-8-rmarkdowns-parameteriseren.html"><a href="vaardigheid-8-rmarkdowns-parameteriseren.html"><i class="fa fa-check"></i><b>10</b> Vaardigheid 8: RMarkdowns parameteriseren</a>
<ul>
<li class="chapter" data-level="10.1" data-path="vaardigheid-8-rmarkdowns-parameteriseren.html"><a href="vaardigheid-8-rmarkdowns-parameteriseren.html#ecdc-data-nieuwgemelde-covid-19-gevallen-en--doden"><i class="fa fa-check"></i><b>10.1</b> ECDC data nieuwgemelde COVID-19-gevallen en -doden</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mijn Data Sciences portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<link href="portfolio_style.css" rel="stylesheet">
<div class="hero-image-container">
  <img class= "hero-image" src="images/20200222_STP002.png">
</div>
<div id="vaardigheid-6-werken-met-relational-databases" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Vaardigheid 6: Werken met <em>relational databases</em><a href="vaardigheid-6-werken-met-relational-databases.html#vaardigheid-6-werken-met-relational-databases" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Tijdens een data analyse wordt vaak de informatie uit verschillende databases gecombineerd. Een gemeenschappelijk gebruikte taal voor het ophalen, beheren en opslaan van data uit gerelateerde databases is <strong>SQL</strong>. In dergelijke databases is data georganiseerd in tabellen die aan elkaar gekoppeld kunnen worden gebaseerd op gemeenschappelijke eigenschappen.</p>
<p>Met het onderstaande voorbeeld laat ik zien, dat ik met SQL de informatie uit drie verschillende tabellen in DBeaver kan samenvoegen.</p>
<div id="samenvoegen-van-virus-activiteit-dummy-data-met-gapminder-dataset" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Samenvoegen van virus-activiteit dummy data met gapminder dataset<a href="vaardigheid-6-werken-met-relational-databases.html#samenvoegen-van-virus-activiteit-dummy-data-met-gapminder-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ik maak eerst drie tabellen aan in RStudio: één met de gapminder dataset van het {dslabs} package en twee tabellen met datasets waarin voor verschillende landen de Influenza of Knokkelkoorts activiteit meerdere keren per jaar gemeten is.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabel 1: </span></span>
<span id="cb22-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb22-2" aria-hidden="true" tabindex="-1"></a>gapminder_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(gapminder)</span>
<span id="cb22-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_df, <span class="dv">3</span>)</span></code></pre></div>
<pre class="watch-out"><code>##   country year infant_mortality life_expectancy fertility population
## 1 Albania 1960            115.4           62.87      6.19    1636054
## 2 Algeria 1960            148.2           47.50      7.65   11124892
## 3  Angola 1960            208.0           35.98      7.32    5270844
##           gdp continent          region
## 1          NA    Europe Southern Europe
## 2 13828152297    Africa Northern Africa
## 3          NA    Africa   Middle Africa</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabel 2: </span></span>
<span id="cb24-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb24-2" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(</span>
<span id="cb24-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;flu_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>))</span>
<span id="cb24-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df, <span class="dv">3</span>)</span></code></pre></div>
<pre class="watch-out"><code>##         Date Argentina Australia Austria Belgium Bolivia Brazil Bulgaria Canada
## 1 2002-12-29        NA        NA      NA      NA      NA    174       NA     NA
## 2 2003-01-05        NA        NA      NA      NA      NA    162       NA     NA
## 3 2003-01-12        NA        NA      NA      NA      NA    174       NA     NA
##   Chile France Germany Hungary Japan Mexico Netherlands New.Zealand Norway
## 1    NA     NA      NA      NA    NA     NA          NA          NA     NA
## 2    NA     NA      NA      NA    NA     NA          NA          NA     NA
## 3     1     NA      NA      NA    NA     NA          NA          NA     NA
##   Paraguay Peru Poland Romania Russia South.Africa Spain Sweden Switzerland
## 1       NA  329     NA      NA     NA           NA    NA     NA          NA
## 2       NA  315     NA      NA     NA           NA    NA     NA          NA
## 3       NA  314     NA      NA     NA           NA    NA     NA          NA
##   Ukraine United.States Uruguay
## 1      NA            NA      NA
## 2      NA            NA      NA
## 3      NA            NA      NA</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabel 3:</span></span>
<span id="cb26-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb26-2" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(</span>
<span id="cb26-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;dengue_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>))</span>
<span id="cb26-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df, <span class="dv">3</span>)</span></code></pre></div>
<pre class="watch-out"><code>##         Date Argentina Bolivia Brazil India Indonesia Mexico Philippines
## 1 2002-12-29        NA   0.101  0.073 0.062     0.101     NA          NA
## 2 2003-01-05        NA   0.143  0.098 0.047     0.039     NA          NA
## 3 2003-01-12        NA   0.176  0.119 0.051     0.059  0.071          NA
##   Singapore Thailand Venezuela
## 1     0.059       NA        NA
## 2     0.059       NA        NA
## 3     0.238       NA        NA</code></pre>
<p>De Influenza en Knokkelkoorts data is niet tidy. Ik maak de tabellen zelf tidy met:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb28-1" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> flu_df, <span class="at">cols=</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">30</span>), <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;influenza_activity&quot;</span>)</span>
<span id="cb28-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb28-2" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> dengue_df, <span class="at">cols=</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>), <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;dengue_activity&quot;</span>)</span></code></pre></div>
<p>Voordat ik de tabellen ga samenvoegen in DBeaver, zorg ik er eerst voor dat de variabelen waarop ik de tabellen wil samenvoegen, land en datum, hetzelfde zijn. In de gapminder tabel is de datum aanwezig als jaartallen in een kolom year, In de andere tabellen is de datum aanwezig als jaar-maand-dag in een kolom Date. Tevens is het belangrijk dat de land en datum kolommen dezelfde titel hebben en van hetzelfde datatype zijn.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Zorg dat er in de Influenza en Knokkelkoorts tabel een kolom aanwezig is met de jaartallen, net als in de gapminder tabel:</span></span>
<span id="cb29-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-2" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> flu_df, <span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb29-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-3" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> dengue_df, <span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb29-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak nieuwe tabellen, met de Influenza of Knokkelkoorts activiteit per jaar i.p.v. per dag:</span></span>
<span id="cb29-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-6" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> flu_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span> <span class="fu">summarise_each</span>(<span class="fu">funs</span>(sum), influenza_activity)</span>
<span id="cb29-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-7" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> dengue_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span> <span class="fu">summarise_each</span>(<span class="fu">funs</span>(sum), dengue_activity)</span>
<span id="cb29-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Afgekeken van https://stackoverflow.com/questions/25089665/error-only-defined-on-a-data-frame-with-all-numeric-variables-with-ddply-on-lar</span></span>
<span id="cb29-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak in deze tabellen de kolommen waarop wordt samengevoegd van hetzelfde datatype als in de gapminder tabel:</span></span>
<span id="cb29-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-11" aria-hidden="true" tabindex="-1"></a>flu_df<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_df<span class="sc">$</span>country)</span>
<span id="cb29-12"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-12" aria-hidden="true" tabindex="-1"></a>dengue_df<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_df<span class="sc">$</span>country)</span>
<span id="cb29-13"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-14" aria-hidden="true" tabindex="-1"></a>flu_df<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(flu_df<span class="sc">$</span>year)</span>
<span id="cb29-15"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-15" aria-hidden="true" tabindex="-1"></a>dengue_df<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dengue_df<span class="sc">$</span>year)</span>
<span id="cb29-16"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak opnieuw dataframes van de tabellen:</span></span>
<span id="cb29-18"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-18" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(flu_df)</span>
<span id="cb29-19"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-19" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(dengue_df)</span>
<span id="cb29-20"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Sla drie dataframes op als CSV en RDS files:</span></span>
<span id="cb29-22"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gapminder_df, <span class="at">file =</span> <span class="st">&quot;gapminder_df.csv&quot;</span>)</span>
<span id="cb29-23"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(flu_df, <span class="at">file =</span> <span class="st">&quot;flu_df.csv&quot;</span>)</span>
<span id="cb29-24"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dengue_df, <span class="at">file =</span> <span class="st">&quot;dengue_df.csv&quot;</span>)</span>
<span id="cb29-25"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(gapminder_df, <span class="st">&quot;C:/Users/steph/DSFB2/portfolio_book/gapminder_df.rds&quot;</span>)</span>
<span id="cb29-26"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(flu_df, <span class="st">&quot;C:/Users/steph/DSFB2/portfolio_book/flu_df.rds&quot;</span>)</span>
<span id="cb29-27"><a href="vaardigheid-6-werken-met-relational-databases.html#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(dengue_df, <span class="st">&quot;C:/Users/steph/DSFB2/portfolio_book/dengue_df.rds&quot;</span>)</span></code></pre></div>
<p>De kolommen met land en datum zijn nu hetzelfde en de tabellen kunnen geüpload worden naar DBeaver:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb30-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak verbinding met mijn database in DBeaver:</span></span>
<span id="cb30-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(),</span>
<span id="cb30-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>,</span>
<span id="cb30-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>,</span>
<span id="cb30-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>,</span>
<span id="cb30-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>,</span>
<span id="cb30-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;...&quot;</span>)</span>
<span id="cb30-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Stuur de tabellen naar de database:</span></span>
<span id="cb30-12"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_df&quot;</span>, flu_df)</span>
<span id="cb30-13"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_df&quot;</span>, dengue_df)</span>
<span id="cb30-14"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder_df&quot;</span>, gapminder_df)</span>
<span id="cb30-15"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Sluit de verbinding weer:</span></span>
<span id="cb30-17"><a href="vaardigheid-6-werken-met-relational-databases.html#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span></code></pre></div>
<p>Om de data(overdracht) te inspecteren, heb ik in DBeaver de Data, Properties en ER Diagram tabs van de tabellen bekeken. Daarnaast heb ik de volgende SQL queries uitgevoerd, waarmee ik specifieke data uit de tabellen opvraag en controleer of dit correct werkt:</p>
<p><img src="images/queries1.png" width="300px" /><img src="images/queries2.png" width="300px" /></p>
<p>De queries gaven de verwachtte output. Ze zijn vertaald naar een zelfde inspectie in R:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dengue_df)</span></code></pre></div>
<pre class="watch-out"><code>## &#39;data.frame&#39;:    140 obs. of  3 variables:
##  $ country        : Factor w/ 10 levels &quot;Argentina&quot;,&quot;Bolivia&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ year           : int  2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 ...
##  $ dengue_activity: num  NA NA 1.53 1.03 1.01 ...</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flu_df)</span></code></pre></div>
<pre class="watch-out"><code>## &#39;data.frame&#39;:    406 obs. of  3 variables:
##  $ country           : Factor w/ 29 levels &quot;Argentina&quot;,&quot;Australia&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ year              : int  2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 ...
##  $ influenza_activity: int  NA NA 8843 8627 8966 10267 9299 7952 6946 5541 ...</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gapminder_df)</span></code></pre></div>
<pre class="watch-out"><code>## &#39;data.frame&#39;:    10545 obs. of  9 variables:
##  $ country         : Factor w/ 185 levels &quot;Albania&quot;,&quot;Algeria&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year            : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...
##  $ infant_mortality: num  115.4 148.2 208 NA 59.9 ...
##  $ life_expectancy : num  62.9 47.5 36 63 65.4 ...
##  $ fertility       : num  6.19 7.65 7.32 4.43 3.11 4.55 4.82 3.45 2.7 5.57 ...
##  $ population      : num  1636054 11124892 5270844 54681 20619075 ...
##  $ gdp             : num  NA 1.38e+10 NA NA 1.08e+11 ...
##  $ continent       : Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 4 1 1 2 2 3 2 5 4 3 ...
##  $ region          : Factor w/ 22 levels &quot;Australia and New Zealand&quot;,..: 19 11 10 2 15 21 2 1 22 21 ...</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Per land de Influenza activiteit, Knokkelkoorts activiteit en kindersterfte in 2009:</span></span>
<span id="cb37-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, influenza_activity, year))</span></code></pre></div>
<pre class="watch-out"><code>##     country influenza_activity year
## 1 Argentina               7952 2009
## 2 Australia              22796 2009
## 3   Austria              47117 2009
## 4   Belgium              10320 2009
## 5   Bolivia              14516 2009
## 6    Brazil              10984 2009</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, dengue_activity, year))</span></code></pre></div>
<pre class="watch-out"><code>##     country dengue_activity year
## 1 Argentina          16.739 2009
## 2   Bolivia          10.362 2009
## 3    Brazil           8.211 2009
## 4     India           4.549 2009
## 5 Indonesia           9.228 2009
## 6    Mexico          14.228 2009</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, infant_mortality, year))</span></code></pre></div>
<pre class="watch-out"><code>##               country infant_mortality year
## 1             Albania             15.4 2009
## 2             Algeria             24.3 2009
## 3              Angola            112.2 2009
## 4 Antigua and Barbuda              8.2 2009
## 5           Argentina             13.4 2009
## 6             Armenia             17.0 2009</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># De laagst gemeten Influenza activiteit, Knokkelkoorts activiteiten kindersterfte:</span></span>
<span id="cb43-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, dengue_activity, year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(dengue_activity))</span></code></pre></div>
<pre class="watch-out"><code>##     country dengue_activity year
## 1 Singapore           0.059 2002
## 2     India           0.062 2002
## 3    Brazil           0.073 2002
## 4   Bolivia           0.101 2002
## 5 Indonesia           0.101 2002
## 6   Bolivia           0.427 2015</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, influenza_activity, year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(influenza_activity))</span></code></pre></div>
<pre class="watch-out"><code>##   country influenza_activity year
## 1  Sweden                106 2010
## 2  Sweden                153 2006
## 3  Sweden                169 2008
## 4  Brazil                174 2002
## 5  Sweden                179 2007
## 6  Sweden                201 2011</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, infant_mortality, year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(infant_mortality))</span></code></pre></div>
<pre class="watch-out"><code>##      country infant_mortality year
## 1 Luxembourg              1.5 2015
## 2 Luxembourg              1.6 2012
## 3    Iceland              1.6 2013
## 4 Luxembourg              1.6 2013
## 5    Iceland              1.6 2014
## 6 Luxembourg              1.6 2014</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># De jaartallen in de gapminder dataset:</span></span>
<span id="cb49-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb49-2" aria-hidden="true" tabindex="-1"></a>gapminder_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>() <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">as.character</span>()</span></code></pre></div>
<pre class="watch-out"><code>## [1] &quot;1960:2016&quot;</code></pre>
<p>De inspectie in R gaf dezelfde resultaten als de queries. De tabellen kunnen nu samengevoegd worden gebaseerd op de <em>compound key</em> van de tabellen country en year. Ik doe dit eerst in R…:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#readRDS(here::here(&quot;gapminder_df.rds&quot;))</span></span>
<span id="cb51-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#readRDS(here::here(&quot;flu_df.rds&quot;))</span></span>
<span id="cb51-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">#readRDS(here::here(&quot;dengue_df.rds&quot;))</span></span>
<span id="cb51-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg flu_df en dengue_df samen...:</span></span>
<span id="cb51-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-6" aria-hidden="true" tabindex="-1"></a>flu_dengue <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flu_df, dengue_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>))</span>
<span id="cb51-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">#...en voeg gapminder_df toe:</span></span>
<span id="cb51-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-9" aria-hidden="true" tabindex="-1"></a>flu_dengue_gapminder_R <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flu_dengue, gapminder_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>))</span>
<span id="cb51-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_dengue_gapminder_R, <span class="dv">5</span>)</span></code></pre></div>
<pre class="watch-out"><code>##     country year influenza_activity dengue_activity infant_mortality
## 1 Argentina 2002                 NA              NA             17.1
## 2 Argentina 2003                 NA              NA             16.6
## 3 Argentina 2004               8843           1.533             16.0
## 4 Argentina 2005               8627           1.035             15.3
## 5 Argentina 2006               8966           1.007             14.6
##   life_expectancy fertility population          gdp continent        region
## 1            74.3      2.38   37889443 242076212334  Americas South America
## 2            74.5      2.34   38309475 263468585945  Americas South America
## 3            75.0      2.31   38728778 287258675094  Americas South America
## 4            75.3      2.29   39145491 313626005874  Americas South America
## 5            75.3      2.27   39558750 340177780212  Americas South America</code></pre>
<p>…en vervolgens in DBeaver:</p>
<p><img src="images/queries3.png" width="500px" /></p>
<p>De output tabel van bovenstaande querie is opgeslagen als een CSV file: flu_dengue_gapminder.csv.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb53-1" aria-hidden="true" tabindex="-1"></a>flu_dengue_gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;flu_dengue_gapminder.csv&quot;</span>))</span>
<span id="cb53-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#kbl(head(flu_dengue_gapminder, 10), caption = &quot;__De gapminder dataset samengevoegd met de Influenza en \nKnokkelkoorts activiteit data__&quot;) %&gt;% kable_styling(full_width = F, bootstrap_options = &quot;striped&quot;, position = &quot;left&quot;) %&gt;% column_spec(1:5, bold = TRUE)</span></span>
<span id="cb53-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb53-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb53-6" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="fu">head</span>(flu_dengue_gapminder, <span class="dv">10</span>))</span></code></pre></div>
<div id="htmlwidget-4461f6e66687d2435807" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4461f6e66687d2435807">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina","Argentina"],[2002,2003,2004,2005,2006,2007,2008,2009,2010,2011],[null,null,8843,8627,8966,10267,9299,7952,6946,5541],[null,null,1.533,1.035,1.007,5.569,1.462,16.739,6.621,3.186],[17.1,16.6,16,15.3,14.6,14.1,13.7,13.4,13,12.7],[74.3,74.5,75,75.3,75.3,75.2,75.4,75.6,75.8,76],[2.38,2.34,2.31,2.29,2.27,2.25,2.24,2.23,2.22,2.2],[37889443,38309475,38728778,39145491,39558750,39969903,40381860,40798641,41222875,41655616],[242076212334,263468585945,287258675094,313626005874,340177780212,369614509411,394594682115,397949689763,434405530244,472935255184],["Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas","Americas"],["South America","South America","South America","South America","South America","South America","South America","South America","South America","South America"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>Year<\/th>\n      <th>Influenza_activity<\/th>\n      <th>Dengue_activity<\/th>\n      <th>infant_mortality<\/th>\n      <th>life_expectancy<\/th>\n      <th>fertility<\/th>\n      <th>population<\/th>\n      <th>gdp<\/th>\n      <th>continent<\/th>\n      <th>region<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8,9]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(flu_dengue_gapminder)</span></code></pre></div>
<pre class="watch-out"><code>##    Country               Year      Influenza_activity Dengue_activity 
##  Length:406         Min.   :2002   Min.   :   106     Min.   : 0.073  
##  Class :character   1st Qu.:2005   1st Qu.:  3302     1st Qu.: 1.508  
##  Mode  :character   Median :2008   Median :  9214     Median : 4.303  
##                     Mean   :2008   Mean   : 23372     Mean   : 5.001  
##                     3rd Qu.:2012   3rd Qu.: 32278     3rd Qu.: 7.872  
##                     Max.   :2015   Max.   :155577     Max.   :16.739  
##                                    NA&#39;s   :72         NA&#39;s   :354     
##  infant_mortality life_expectancy   fertility       population       
##  Min.   : 2.000   Min.   :64.70   Min.   :1.150   Min.   :  3324096  
##  1st Qu.: 3.700   1st Qu.:74.17   1st Qu.:1.420   1st Qu.:  9072979  
##  Median : 5.850   Median :78.25   Median :1.755   Median : 20977828  
##  Mean   : 9.641   Mean   :77.20   Mean   :1.838   Mean   : 42737637  
##  3rd Qu.:13.325   3rd Qu.:80.80   3rd Qu.:1.990   3rd Qu.: 46527412  
##  Max.   :53.700   Max.   :83.20   Max.   :3.980   Max.   :207847528  
##  NA&#39;s   :42       NA&#39;s   :42      NA&#39;s   :42      NA&#39;s   :42         
##       gdp             continent            region         
##  Min.   :7.214e+09   Length:406         Length:406        
##  1st Qu.:5.680e+10   Class :character   Class :character  
##  Median :2.616e+11   Mode  :character   Mode  :character  
##  Mean   :5.748e+11                                        
##  3rd Qu.:6.370e+11                                        
##  Max.   :5.218e+12                                        
##  NA&#39;s   :146</code></pre>
<p>Tijd om de daadwerkelijke data te gaan analyseren. Ik wil eerst een overzicht van per jaar, per land de gemiddelde Influenza activiteit, Knokkelkoorts activiteit, kindersterfte, levensverwachting, geboorten en populatie over de periode van 2002 - 2015.</p>
<p>Ik vermoed dat Knokkelkoorts over het algemeen vooral voorkwam in (sub)tropische gebieden én dat er meer kindersterfte heeft plaatsgevonden in landen waarin in een bepaald jaar de Influenza of Knokkelkoorts activiteit zeer hoog was.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bereken de gemiddelden van de variabelen per jaar en land:</span></span>
<span id="cb56-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-2" aria-hidden="true" tabindex="-1"></a>FLU <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_Influenza_act =</span> <span class="fu">mean</span>(Influenza_activity))</span>
<span id="cb56-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-3" aria-hidden="true" tabindex="-1"></a>DENG <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_Knokkelkoorts_act =</span> <span class="fu">mean</span>(Dengue_activity))</span>
<span id="cb56-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-4" aria-hidden="true" tabindex="-1"></a>MORT <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_kindersterfte =</span> <span class="fu">mean</span>(infant_mortality))</span>
<span id="cb56-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-5" aria-hidden="true" tabindex="-1"></a>LIFE <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_levensverwachting=</span> <span class="fu">mean</span>(life_expectancy))</span>
<span id="cb56-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-6" aria-hidden="true" tabindex="-1"></a>FERT <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_geboorten =</span> <span class="fu">mean</span>(fertility))</span>
<span id="cb56-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-7" aria-hidden="true" tabindex="-1"></a>POPU <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_populatie =</span> <span class="fu">mean</span>(population))</span>
<span id="cb56-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg de gemiddelden samen tot een tabel:</span></span>
<span id="cb56-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-10" aria-hidden="true" tabindex="-1"></a>desc_stat <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country, Year) <span class="sc">%&gt;%</span> unique <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(FLU, DENG, MORT, LIFE, FERT, POPU) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Year)</span>
<span id="cb56-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-12"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">#kbl(tail(desc_stat, 58), caption = &quot;__Per jaar, per land de gemiddelden van de gemeten variabelen__&quot;) %&gt;% kable_styling(full_width = F, bootstrap_options = &quot;striped&quot;, position = &quot;left&quot;) %&gt;% column_spec(1:2, bold = TRUE)</span></span>
<span id="cb56-13"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb56-15"><a href="vaardigheid-6-werken-met-relational-databases.html#cb56-15" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="fu">tail</span>(desc_stat,<span class="dv">58</span>))</span></code></pre></div>
<div id="htmlwidget-e74b9fcb113c7e8f8095" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e74b9fcb113c7e8f8095">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58"],["Argentina","Australia","Austria","Belgium","Bolivia","Brazil","Bulgaria","Canada","Chile","France","Germany","Hungary","Japan","Mexico","Netherlands","New.Zealand","Norway","Paraguay","Peru","Poland","Romania","Russia","South.Africa","Spain","Sweden","Switzerland","Ukraine","United.States","Uruguay","Argentina","Australia","Austria","Belgium","Bolivia","Brazil","Bulgaria","Canada","Chile","France","Germany","Hungary","Japan","Mexico","Netherlands","New.Zealand","Norway","Paraguay","Peru","Poland","Romania","Russia","South.Africa","Spain","Sweden","Switzerland","Ukraine","United.States","Uruguay"],[2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2014,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015,2015],[7073,30705,51635,5475,9065,8855,25346,121388,1075,2923,38029,3994,33764,69945,1680,3322,4072,13242,6555,1536,34484,30966,155577,3010,266,3870,20112,99848,5390,4841,20355,40143,11111,6407,6603,16569,68006,431,10760,28453,6098,24139,43436,1666,807,4094,9894,4020,1956,23679,21447,98940,4863,328,6390,12101,61295,4195],[2.767,null,null,null,0.91,6.818,null,null,null,null,null,null,null,10.057,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,2.118,null,null,null,0.427,11.705,null,null,null,null,null,null,null,4.827,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[11.5,3.2,3,3.4,31.7,14.4,9.7,4.4,7.2,3.6,3.2,5.3,2.1,11.9,3.3,null,2.2,18.1,13.6,4.5,10.1,8.5,null,3.6,2.4,3.5,8.1,null,9.1,11.1,3,2.9,3.3,30.6,14.6,9.3,4.3,7,3.5,3.1,5.3,2,11.3,3.2,null,2,17.5,13.1,4.5,9.7,8.2,null,3.5,2.4,3.4,7.7,null,8.7],[76.3,82.3,81.2,80.5,72.9,74.3,74.7,81.7,79.2,81.7,80.7,76.5,83.1,75.6,81.3,null,82,74.3,79.3,77.4,75.1,70.9,null,82.5,82.1,82.9,71.3,null,76.6,76.5,82.3,81.3,80.5,73.2,74.4,74.8,81.7,79.4,81.8,80.8,76.7,83.2,75.9,81.3,null,82,74.4,79.5,77.6,75.2,71,null,82.6,82.1,83,71.5,null,76.8],[2.16,1.88,1.48,1.86,3.18,1.79,1.56,1.68,1.81,1.98,1.43,1.43,1.43,2.16,1.78,null,1.93,2.83,2.39,1.43,1.43,1.6,null,1.52,1.93,1.54,1.48,null,2.04,2.15,1.88,1.5,1.86,3.14,1.78,1.57,1.68,1.8,1.98,1.44,1.44,1.45,2.13,1.78,null,1.93,2.8,2.36,1.44,1.45,1.61,null,1.53,1.93,1.55,1.49,null,2.03],[42980026,23622353,8516916,11226322,10561887,206077898,7201308,35587793,17762647,64121249,80646262,9889540,126794564,125385833,16868020,null,5147970,6552518,30973148,38619974,19651554,143429435,null,46259716,9703247,8211383,45002497,null,3419516,43416755,23968973,8544586,11299192,10724705,207847528,7149787,35939927,17948141,64395345,80688545,9855023,126573481,127017224,16924929,null,5210967,6639123,31376670,38611794,19511324,143456918,null,46121699,9779426,8298663,44823765,null,3431555]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Country<\/th>\n      <th>Year<\/th>\n      <th>Gem_Influenza_act<\/th>\n      <th>Gem_Knokkelkoorts_act<\/th>\n      <th>Gem_kindersterfte<\/th>\n      <th>Gem_levensverwachting<\/th>\n      <th>Gem_geboorten<\/th>\n      <th>Gem_populatie<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7,8]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Ik ben geïnteresseerd in de trends van Influenza en Knokkelkoorts activiteit door de jaren heen en wil het verband tussen deze activiteit en kindersterfte toetsen.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-26"></span>
<img src="_main_files/figure-html/unnamed-chunk-26-1.png" alt="__Influenza activiteit door de jaren heen.__ Voor 29 landen het aantal Influenza gevallen van 2002 tot en met 2015." width="672" />
<p class="caption">
Figure 8.1: <strong>Influenza activiteit door de jaren heen.</strong> Voor 29 landen het aantal Influenza gevallen van 2002 tot en met 2015.
</p>
</div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Knokkelkoorts activiteit door de jaren heen</span></span>
<span id="cb57-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-2" aria-hidden="true" tabindex="-1"></a>fdg2 <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Dengue_activity <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb57-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> fdg2, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Dengue_activity)) <span class="sc">+</span></span>
<span id="cb57-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country), <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb57-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Jaar&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Knokkelkoorts activiteit (gevallen)&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Land&quot;</span>) <span class="sc">+</span></span>
<span id="cb57-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-27"></span>
<img src="_main_files/figure-html/unnamed-chunk-27-1.png" alt="__Knokkelkoorts activiteit door de jaren heen__. Voor 4 landen het aantal Knokkelkoorts gevallen van 2002 tot en met 2015." width="672" />
<p class="caption">
Figure 8.2: <strong>Knokkelkoorts activiteit door de jaren heen</strong>. Voor 4 landen het aantal Knokkelkoorts gevallen van 2002 tot en met 2015.
</p>
</div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 3: Verband tussen Influenza_activity en infant_mortality per land door de jaren heen</span></span>
<span id="cb58-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb58-2" aria-hidden="true" tabindex="-1"></a>fdg3 <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Influenza_activity <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> infant_mortality <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb58-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(fdg3<span class="sc">$</span>Influenza_activity, fdg3<span class="sc">$</span>infant_mortality, <span class="at">method=</span><span class="fu">c</span>(<span class="st">&quot;pearson&quot;</span>)) <span class="co">#p-value = 0.6713, geen stat. sig. verband</span></span></code></pre></div>
<pre class="watch-out"><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  fdg3$Influenza_activity and fdg3$infant_mortality
## t = 0.42482, df = 301, p-value = 0.6713
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.08844289  0.13677987
## sample estimates:
##       cor 
## 0.0244791</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-1" aria-hidden="true" tabindex="-1"></a>cor_coefficient <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">cor.test</span>(fdg3<span class="sc">$</span>Influenza_activity, fdg3<span class="sc">$</span>infant_mortality, <span class="at">method=</span><span class="fu">c</span>(<span class="st">&quot;pearson&quot;</span>))<span class="sc">$</span>estimate,<span class="dv">2</span>)</span>
<span id="cb60-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> fdg3, <span class="fu">aes</span>(<span class="at">x =</span> Influenza_activity, <span class="at">y =</span> infant_mortality)) <span class="sc">+</span></span>
<span id="cb60-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb60-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> F, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Kindersterfte (aantal)&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Influenza activiteit (gevallen)&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb60-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">112500</span>, <span class="at">y =</span> <span class="dv">45</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Pearson&#39;s r = &quot;</span>, cor_coefficient))</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-28"></span>
<img src="_main_files/figure-html/unnamed-chunk-28-1.png" alt="__Per land het verband tussen Influenza activiteit en kindersterfte door de jaren heen__. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Influenza gevallen en de sterfte onder kinderen gemeten." width="672" />
<p class="caption">
Figure 8.3: <strong>Per land het verband tussen Influenza activiteit en kindersterfte door de jaren heen</strong>. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Influenza gevallen en de sterfte onder kinderen gemeten.
</p>
</div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 4: Verband tussen Dengue_activity en infant_mortality per land door de jaren heen</span></span>
<span id="cb61-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-2" aria-hidden="true" tabindex="-1"></a>fdg4 <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Dengue_activity <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> infant_mortality <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb61-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> fdg4, <span class="fu">aes</span>(<span class="at">x =</span> Dengue_activity, <span class="at">y =</span> infant_mortality)) <span class="sc">+</span></span>
<span id="cb61-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Country), <span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb61-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> F, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Kindersterfte (aantal)&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Knokkelkoorts activiteit (gevallen)&quot;</span>) <span class="sc">+</span></span>
<span id="cb61-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb61-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">10</span>, <span class="at">y =</span> <span class="dv">50</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Pearson&#39;s r = &quot;</span>, cor_coefficient))</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-29"></span>
<img src="_main_files/figure-html/unnamed-chunk-29-1.png" alt="__Per land het verband tussen Knokkelkoorts acitviteit en kindersterfte door de jaren heen__. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Knokkelkoorts gevallen en de sterfte onder kinderen gemeten." width="672" />
<p class="caption">
Figure 8.4: <strong>Per land het verband tussen Knokkelkoorts acitviteit en kindersterfte door de jaren heen</strong>. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Knokkelkoorts gevallen en de sterfte onder kinderen gemeten.
</p>
</div>
<p><strong>CONCLUSIE</strong></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vaardigheid-7-een-r-package-maken.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
