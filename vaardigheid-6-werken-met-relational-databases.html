<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio</title>
  <meta name="description" content="8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Vaardigheid 6: Werken met relational databases | Mijn Data Sciences portfolio" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"/>
<link rel="next" href="vaardigheid-7-een-r-package-maken.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="portfolio_style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Over mij</a></li>
<li class="chapter" data-level="2" data-path="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><a href="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><i class="fa fa-check"></i><b>2</b> Vaardigheid 1: Semi-reproduceerbare data analyseren</a>
<ul>
<li class="chapter" data-level="2.1" data-path="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><a href="vaardigheid-1-semi-reproduceerbare-data-analyseren.html#c.-elegans-kweekplaat-experiment"><i class="fa fa-check"></i><b>2.1</b> <em>C. elegans</em> kweekplaat experiment</a></li>
<li class="chapter" data-level="2.2" data-path="vaardigheid-1-semi-reproduceerbare-data-analyseren.html"><a href="vaardigheid-1-semi-reproduceerbare-data-analyseren.html#normalisatie-met-het-drc-package"><i class="fa fa-check"></i><b>2.2</b> Normalisatie met het {drc} package</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vaardigheid-2-een-open-source-analyse-reproduceren.html"><a href="vaardigheid-2-een-open-source-analyse-reproduceren.html"><i class="fa fa-check"></i><b>3</b> Vaardigheid 2: Een <em>Open Source</em> analyse reproduceren</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vaardigheid-2-een-open-source-analyse-reproduceren.html"><a href="vaardigheid-2-een-open-source-analyse-reproduceren.html#ripeta-criteria"><i class="fa fa-check"></i><b>3.1</b> Ripeta criteria</a></li>
<li class="chapter" data-level="3.2" data-path="vaardigheid-2-een-open-source-analyse-reproduceren.html"><a href="vaardigheid-2-een-open-source-analyse-reproduceren.html#analyse-reproduceren"><i class="fa fa-check"></i><b>3.2</b> Analyse reproduceren</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vaardigheid-3-folder-structuur-gebruiken-volgens-de-guerilla-principles.html"><a href="vaardigheid-3-folder-structuur-gebruiken-volgens-de-guerilla-principles.html"><i class="fa fa-check"></i><b>4</b> Vaardigheid 3: Folder structuur gebruiken volgens de <em>Guerilla Principles</em></a></li>
<li class="chapter" data-level="5" data-path="vaardigheid-4-opmaken-met-rmarkdown-en-html-syntax.html"><a href="vaardigheid-4-opmaken-met-rmarkdown-en-html-syntax.html"><i class="fa fa-check"></i><b>5</b> Vaardigheid 4: Opmaken met RMarkdown en HTML syntax</a></li>
<li class="chapter" data-level="6" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><i class="fa fa-check"></i><b>6</b> Vrije besteding: een nieuwe <em>skill</em> ontwikkelen</a>
<ul>
<li class="chapter" data-level="6.1" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#introductie"><i class="fa fa-check"></i><b>6.1</b> Introductie</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#plan-van-aanpak"><i class="fa fa-check"></i><b>6.1.1</b> Plan van Aanpak</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#deel-1-oefenen-met-de-vignette-lcms-data-preprocessing-and-analysis-with-xcms"><i class="fa fa-check"></i><b>6.2</b> Deel 1: Oefenen met de vignette ‘LCMS data preprocessing and analysis with xcms’</a></li>
<li class="chapter" data-level="6.3" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#deel-2-xcms-gebruiken-voor-een-eigen-analyse-van-de-faahko-monsters"><i class="fa fa-check"></i><b>6.3</b> Deel 2: xcms gebruiken voor een eigen analyse van de {faahKO} monsters</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#data-import"><i class="fa fa-check"></i><b>6.3.1</b> 1) Data import</a></li>
<li class="chapter" data-level="6.3.2" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#data-inspectie"><i class="fa fa-check"></i><b>6.3.2</b> 2) Data inspectie</a></li>
<li class="chapter" data-level="6.3.3" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#piekdetectie"><i class="fa fa-check"></i><b>6.3.3</b> 3) Piekdetectie</a></li>
<li class="chapter" data-level="6.3.4" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#alignment"><i class="fa fa-check"></i><b>6.3.4</b> 4) <em>Alignment</em></a></li>
<li class="chapter" data-level="6.3.5" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#correspondence"><i class="fa fa-check"></i><b>6.3.5</b> 5) <em>Correspondence</em></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="vrije-besteding-een-nieuwe-skill-ontwikkelen.html"><a href="vrije-besteding-een-nieuwe-skill-ontwikkelen.html#afronding"><i class="fa fa-check"></i><b>6.4</b> Afronding</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"><a href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"><i class="fa fa-check"></i><b>7</b> Vaardigheid 5: Correct refereren m.b.v. een <em>reference manager</em></a>
<ul>
<li class="chapter" data-level="7.1" data-path="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html"><a href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html#dsfb2-2022-project-regenwormen-introductie"><i class="fa fa-check"></i><b>7.1</b> DSFB2 2022 Project Regenwormen: Introductie</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vaardigheid-6-werken-met-relational-databases.html"><a href="vaardigheid-6-werken-met-relational-databases.html"><i class="fa fa-check"></i><b>8</b> Vaardigheid 6: Werken met <em>relational databases</em></a>
<ul>
<li class="chapter" data-level="8.1" data-path="vaardigheid-6-werken-met-relational-databases.html"><a href="vaardigheid-6-werken-met-relational-databases.html#samenvoegen-van-virus-activiteit-dummy-data-met-gapminder-dataset"><i class="fa fa-check"></i><b>8.1</b> Samenvoegen van virus-activiteit dummy data met gapminder dataset</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="vaardigheid-7-een-r-package-maken.html"><a href="vaardigheid-7-een-r-package-maken.html"><i class="fa fa-check"></i><b>9</b> Vaardigheid 7: Een R <em>package</em> maken</a></li>
<li class="chapter" data-level="10" data-path="vaardigheid-8-rmarkdowns-parameteriseren.html"><a href="vaardigheid-8-rmarkdowns-parameteriseren.html"><i class="fa fa-check"></i><b>10</b> Vaardigheid 8: RMarkdowns parameteriseren</a>
<ul>
<li class="chapter" data-level="10.1" data-path="vaardigheid-8-rmarkdowns-parameteriseren.html"><a href="vaardigheid-8-rmarkdowns-parameteriseren.html#ecdc-data-nieuwgemelde-covid-19-gevallen-en--doden"><i class="fa fa-check"></i><b>10.1</b> ECDC data nieuwgemelde COVID-19-gevallen en -doden</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="referenties.html"><a href="referenties.html"><i class="fa fa-check"></i><b>11</b> Referenties</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Mijn Data Sciences portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<link href="portfolio_style.css" rel="stylesheet">
<div class="hero-image-container">
  <img class= "hero-image" src="https://www.economist.com/img/b/1096/616/90/sites/default/files/20200222_STP002.jpg">
</div>
<div id="vaardigheid-6-werken-met-relational-databases" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Vaardigheid 6: Werken met <em>relational databases</em><a href="vaardigheid-6-werken-met-relational-databases.html#vaardigheid-6-werken-met-relational-databases" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Tijdens een data analyse wordt vaak de informatie uit verschillende <em>databases</em> gecombineerd. Een gemeenschappelijk gebruikte taal voor het ophalen, beheren en opslaan van data uit gerelateerde <em>databases</em> is SQL. In dergelijke <em>databases</em> is data georganiseerd in tabellen die aan elkaar gekoppeld kunnen worden gebaseerd op gemeenschappelijke eigenschappen.</p>
<p>Met het onderstaande voorbeeld laat ik zien, dat ik met SQL de informatie uit drie verschillende tabellen in DBeaver kan samenvoegen.</p>
<div id="samenvoegen-van-virus-activiteit-dummy-data-met-gapminder-dataset" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Samenvoegen van virus-activiteit dummy data met gapminder dataset<a href="vaardigheid-6-werken-met-relational-databases.html#samenvoegen-van-virus-activiteit-dummy-data-met-gapminder-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ik maak eerst drie tabellen aan in RStudio: één met de gapminder dataset van het {dslabs} <em>package</em> en twee tabellen met datasets waarin voor verschillende landen de Influenza of Knokkelkoorts activiteit meerdere keren per jaar gemeten is.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabel 1: </span></span>
<span id="cb87-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb87-2" aria-hidden="true" tabindex="-1"></a>gapminder_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(gapminder)</span>
<span id="cb87-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_df, <span class="dv">3</span>)</span></code></pre></div>
<pre class="watch-out"><code>##   country year infant_mortality life_expectancy fertility population
## 1 Albania 1960            115.4           62.87      6.19    1636054
## 2 Algeria 1960            148.2           47.50      7.65   11124892
## 3  Angola 1960            208.0           35.98      7.32    5270844
##           gdp continent          region
## 1          NA    Europe Southern Europe
## 2 13828152297    Africa Northern Africa
## 3          NA    Africa   Middle Africa</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabel 2: </span></span>
<span id="cb89-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb89-2" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data_raw&quot;</span>, <span class="st">&quot;data03_assignment_7&quot;</span>,</span>
<span id="cb89-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;flu_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>))</span>
<span id="cb89-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df, <span class="dv">3</span>)</span></code></pre></div>
<pre class="watch-out"><code>##         Date Argentina Australia Austria Belgium Bolivia Brazil Bulgaria Canada
## 1 2002-12-29        NA        NA      NA      NA      NA    174       NA     NA
## 2 2003-01-05        NA        NA      NA      NA      NA    162       NA     NA
## 3 2003-01-12        NA        NA      NA      NA      NA    174       NA     NA
##   Chile France Germany Hungary Japan Mexico Netherlands New.Zealand Norway
## 1    NA     NA      NA      NA    NA     NA          NA          NA     NA
## 2    NA     NA      NA      NA    NA     NA          NA          NA     NA
## 3     1     NA      NA      NA    NA     NA          NA          NA     NA
##   Paraguay Peru Poland Romania Russia South.Africa Spain Sweden Switzerland
## 1       NA  329     NA      NA     NA           NA    NA     NA          NA
## 2       NA  315     NA      NA     NA           NA    NA     NA          NA
## 3       NA  314     NA      NA     NA           NA    NA     NA          NA
##   Ukraine United.States Uruguay
## 1      NA            NA      NA
## 2      NA            NA      NA
## 3      NA            NA      NA</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabel 3:</span></span>
<span id="cb91-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb91-2" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data_raw&quot;</span>, <span class="st">&quot;data03_assignment_7&quot;</span>,</span>
<span id="cb91-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;dengue_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>))</span>
<span id="cb91-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df, <span class="dv">3</span>)</span></code></pre></div>
<pre class="watch-out"><code>##         Date Argentina Bolivia Brazil India Indonesia Mexico Philippines
## 1 2002-12-29        NA   0.101  0.073 0.062     0.101     NA          NA
## 2 2003-01-05        NA   0.143  0.098 0.047     0.039     NA          NA
## 3 2003-01-12        NA   0.176  0.119 0.051     0.059  0.071          NA
##   Singapore Thailand Venezuela
## 1     0.059       NA        NA
## 2     0.059       NA        NA
## 3     0.238       NA        NA</code></pre>
<p>De Influenza en Knokkelkoorts data is niet <em>tidy.</em> Ik maak de tabellen zelf <em>tidy</em> met:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb93-1" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> flu_df, <span class="at">cols=</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">30</span>), <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;influenza_activity&quot;</span>)</span>
<span id="cb93-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb93-2" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> dengue_df, <span class="at">cols=</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>), <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;dengue_activity&quot;</span>)</span></code></pre></div>
<p>Voordat ik de tabellen ga samenvoegen in DBeaver, zorg ik er eerst voor dat de variabelen waarop ik de tabellen wil samenvoegen, land en datum, hetzelfde zijn. In de gapminder tabel is de datum aanwezig als jaartallen in een kolom ‘year’, In de andere tabellen is de datum aanwezig als jaar-maand-dag in een kolom ‘Date.’ Tevens is het belangrijk dat de land en datum kolommen dezelfde titel hebben en van hetzelfde datatype zijn.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Zorg dat er in de Influenza en Knokkelkoorts tabel een kolom aanwezig is met de jaartallen, net als in de gapminder tabel:</span></span>
<span id="cb94-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-2" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> flu_df, <span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb94-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-3" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> dengue_df, <span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb94-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak nieuwe tabellen, met de Influenza of Knokkelkoorts activiteit per jaar i.p.v. per dag:</span></span>
<span id="cb94-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-6" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> flu_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span> <span class="fu">summarise_each</span>(<span class="fu">funs</span>(sum), influenza_activity)</span>
<span id="cb94-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-7" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> dengue_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country, year) <span class="sc">%&gt;%</span> <span class="fu">summarise_each</span>(<span class="fu">funs</span>(sum), dengue_activity)</span>
<span id="cb94-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Afgekeken van https://stackoverflow.com/questions/25089665/error-only-defined-on-a-data-frame-with-all-numeric-variables-with-ddply-on-lar</span></span>
<span id="cb94-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak in deze tabellen de kolommen waarop wordt samengevoegd van hetzelfde datatype als in de gapminder tabel:</span></span>
<span id="cb94-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-11" aria-hidden="true" tabindex="-1"></a>flu_df<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_df<span class="sc">$</span>country)</span>
<span id="cb94-12"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-12" aria-hidden="true" tabindex="-1"></a>dengue_df<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_df<span class="sc">$</span>country)</span>
<span id="cb94-13"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-14"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-14" aria-hidden="true" tabindex="-1"></a>flu_df<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(flu_df<span class="sc">$</span>year)</span>
<span id="cb94-15"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-15" aria-hidden="true" tabindex="-1"></a>dengue_df<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dengue_df<span class="sc">$</span>year)</span>
<span id="cb94-16"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-17"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak opnieuw dataframes van de tabellen:</span></span>
<span id="cb94-18"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-18" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(flu_df)</span>
<span id="cb94-19"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-19" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(dengue_df)</span>
<span id="cb94-20"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-21"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Sla drie dataframes op als CSV en RDS files:</span></span>
<span id="cb94-22"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-22" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(gapminder_df, file = &quot;gapminder_df.csv&quot;)</span></span>
<span id="cb94-23"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-23" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(flu_df, file = &quot;flu_df.csv&quot;)</span></span>
<span id="cb94-24"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-24" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(dengue_df, file = &quot;dengue_df.csv&quot;)</span></span>
<span id="cb94-25"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-25" aria-hidden="true" tabindex="-1"></a><span class="co">#saveRDS(gapminder_df, &quot;C:/Users/steph/DSFB2/portfolio_book/gapminder_df.rds&quot;)</span></span>
<span id="cb94-26"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-26" aria-hidden="true" tabindex="-1"></a><span class="co">#saveRDS(flu_df, &quot;C:/Users/steph/DSFB2/portfolio_book/flu_df.rds&quot;)</span></span>
<span id="cb94-27"><a href="vaardigheid-6-werken-met-relational-databases.html#cb94-27" aria-hidden="true" tabindex="-1"></a><span class="co">#saveRDS(dengue_df, &quot;C:/Users/steph/DSFB2/portfolio_book/dengue_df.rds&quot;)</span></span></code></pre></div>
<p>De kolommen met land en datum zijn nu hetzelfde en de tabellen kunnen geüpload worden naar DBeaver:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb95-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Maak verbinding met mijn database in DBeaver:</span></span>
<span id="cb95-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(),</span>
<span id="cb95-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>,</span>
<span id="cb95-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>,</span>
<span id="cb95-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>,</span>
<span id="cb95-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>,</span>
<span id="cb95-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;...&quot;</span>)</span>
<span id="cb95-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Stuur de tabellen naar de database:</span></span>
<span id="cb95-12"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_df&quot;</span>, flu_df)</span>
<span id="cb95-13"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_df&quot;</span>, dengue_df)</span>
<span id="cb95-14"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder_df&quot;</span>, gapminder_df)</span>
<span id="cb95-15"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-16"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Sluit de verbinding weer:</span></span>
<span id="cb95-17"><a href="vaardigheid-6-werken-met-relational-databases.html#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span></code></pre></div>
<p>Om de data(overdracht) te inspecteren, heb ik in DBeaver de ‘Data’, ‘Properties’ en ‘ER Diagram’ <em>tabs</em> van de tabellen bekeken. Daarnaast heb ik de volgende SQL <em>queries</em> uitgevoerd, waarmee ik specifieke data uit de tabellen opvraag en controleer of dit correct werkt:</p>
<p><img src="images/queries1.png" width="300px" /><img src="images/queries2.png" width="300px" /></p>
<p>Deze <em>queries</em> gaven de verwachtte output. Ze zijn vertaald naar een zelfde inspectie in R:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dengue_df)</span></code></pre></div>
<pre class="watch-out"><code>## &#39;data.frame&#39;:    140 obs. of  3 variables:
##  $ country        : Factor w/ 10 levels &quot;Argentina&quot;,&quot;Bolivia&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ year           : int  2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 ...
##  $ dengue_activity: num  NA NA 1.53 1.03 1.01 ...</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flu_df)</span></code></pre></div>
<pre class="watch-out"><code>## &#39;data.frame&#39;:    406 obs. of  3 variables:
##  $ country           : Factor w/ 29 levels &quot;Argentina&quot;,&quot;Australia&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ year              : int  2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 ...
##  $ influenza_activity: int  NA NA 8843 8627 8966 10267 9299 7952 6946 5541 ...</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gapminder_df)</span></code></pre></div>
<pre class="watch-out"><code>## &#39;data.frame&#39;:    10545 obs. of  9 variables:
##  $ country         : Factor w/ 185 levels &quot;Albania&quot;,&quot;Algeria&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year            : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...
##  $ infant_mortality: num  115.4 148.2 208 NA 59.9 ...
##  $ life_expectancy : num  62.9 47.5 36 63 65.4 ...
##  $ fertility       : num  6.19 7.65 7.32 4.43 3.11 4.55 4.82 3.45 2.7 5.57 ...
##  $ population      : num  1636054 11124892 5270844 54681 20619075 ...
##  $ gdp             : num  NA 1.38e+10 NA NA 1.08e+11 ...
##  $ continent       : Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 4 1 1 2 2 3 2 5 4 3 ...
##  $ region          : Factor w/ 22 levels &quot;Australia and New Zealand&quot;,..: 19 11 10 2 15 21 2 1 22 21 ...</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Per land de Influenza activiteit, Knokkelkoorts activiteit en kindersterfte in 2009:</span></span>
<span id="cb102-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, influenza_activity, year))</span></code></pre></div>
<pre class="watch-out"><code>##     country influenza_activity year
## 1 Argentina               7952 2009
## 2 Australia              22796 2009
## 3   Austria              47117 2009
## 4   Belgium              10320 2009
## 5   Bolivia              14516 2009
## 6    Brazil              10984 2009</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, dengue_activity, year))</span></code></pre></div>
<pre class="watch-out"><code>##     country dengue_activity year
## 1 Argentina          16.739 2009
## 2   Bolivia          10.362 2009
## 3    Brazil           8.211 2009
## 4     India           4.549 2009
## 5 Indonesia           9.228 2009
## 6    Mexico          14.228 2009</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, infant_mortality, year))</span></code></pre></div>
<pre class="watch-out"><code>##               country infant_mortality year
## 1             Albania             15.4 2009
## 2             Algeria             24.3 2009
## 3              Angola            112.2 2009
## 4 Antigua and Barbuda              8.2 2009
## 5           Argentina             13.4 2009
## 6             Armenia             17.0 2009</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># De laagst gemeten Influenza activiteit, Knokkelkoorts activiteiten kindersterfte:</span></span>
<span id="cb108-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, dengue_activity, year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(dengue_activity))</span></code></pre></div>
<pre class="watch-out"><code>##     country dengue_activity year
## 1 Singapore           0.059 2002
## 2     India           0.062 2002
## 3    Brazil           0.073 2002
## 4   Bolivia           0.101 2002
## 5 Indonesia           0.101 2002
## 6   Bolivia           0.427 2015</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, influenza_activity, year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(influenza_activity))</span></code></pre></div>
<pre class="watch-out"><code>##   country influenza_activity year
## 1  Sweden                106 2010
## 2  Sweden                153 2006
## 3  Sweden                169 2008
## 4  Brazil                174 2002
## 5  Sweden                179 2007
## 6  Sweden                201 2011</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, infant_mortality, year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(infant_mortality))</span></code></pre></div>
<pre class="watch-out"><code>##      country infant_mortality year
## 1 Luxembourg              1.5 2015
## 2 Luxembourg              1.6 2012
## 3    Iceland              1.6 2013
## 4 Luxembourg              1.6 2013
## 5    Iceland              1.6 2014
## 6 Luxembourg              1.6 2014</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># De jaartallen in de gapminder dataset:</span></span>
<span id="cb114-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb114-2" aria-hidden="true" tabindex="-1"></a>gapminder_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(year) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>() <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">as.character</span>()</span></code></pre></div>
<pre class="watch-out"><code>## [1] &quot;1960:2016&quot;</code></pre>
<p>De inspectie in R gaf dezelfde, correcte resultaten als de <em>queries</em>. De tabellen kunnen nu samengevoegd worden gebaseerd op de <em>compound key</em> ‘country’ en ‘year’ van de tabellen. Ik doe dit eerst in R…:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">#readRDS(here::here(&quot;gapminder_df.rds&quot;))</span></span>
<span id="cb116-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co">#readRDS(here::here(&quot;flu_df.rds&quot;))</span></span>
<span id="cb116-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">#readRDS(here::here(&quot;dengue_df.rds&quot;))</span></span>
<span id="cb116-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg flu_df en dengue_df samen...:</span></span>
<span id="cb116-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-6" aria-hidden="true" tabindex="-1"></a>flu_dengue <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flu_df, dengue_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>))</span>
<span id="cb116-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="co">#...en voeg gapminder_df toe:</span></span>
<span id="cb116-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-9" aria-hidden="true" tabindex="-1"></a>flu_dengue_gapminder_R <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flu_dengue, gapminder_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>))</span>
<span id="cb116-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_dengue_gapminder_R, <span class="dv">5</span>)</span></code></pre></div>
<pre class="watch-out"><code>##     country year influenza_activity dengue_activity infant_mortality
## 1 Argentina 2002                 NA              NA             17.1
## 2 Argentina 2003                 NA              NA             16.6
## 3 Argentina 2004               8843           1.533             16.0
## 4 Argentina 2005               8627           1.035             15.3
## 5 Argentina 2006               8966           1.007             14.6
##   life_expectancy fertility population          gdp continent        region
## 1            74.3      2.38   37889443 242076212334  Americas South America
## 2            74.5      2.34   38309475 263468585945  Americas South America
## 3            75.0      2.31   38728778 287258675094  Americas South America
## 4            75.3      2.29   39145491 313626005874  Americas South America
## 5            75.3      2.27   39558750 340177780212  Americas South America</code></pre>
<p>…en vervolgens in DBeaver:</p>
<p><img src="images/queries3.png" width="500px" /></p>
<p>De output tabel van bovenstaande <em>querie</em> is opgeslagen als een CSV bestand (flu_dengue_gapminder.csv) en kan gebruikt worden in R:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb118-1" aria-hidden="true" tabindex="-1"></a>flu_dengue_gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;data01_assignment_7&quot;</span>, <span class="st">&quot;flu_dengue_gapminder.csv&quot;</span>))</span>
<span id="cb118-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Voorbeeld met eerste 10 rijen:</span></span>
<span id="cb118-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Om één of andere reden verhelpt &#39;latex_options = &quot;scale_down&quot;&#39;, afgekeken van https://stackoverflow.com/questions/49044753/scale-kable-table-to-fit-page-width, NIET het buiten de marges vallen van de tabel...</span></span>
<span id="cb118-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(<span class="fu">head</span>(flu_dengue_gapminder, <span class="dv">10</span>), <span class="at">caption =</span> <span class="st">&quot;__De gapminder dataset samengevoegd met de Influenza en </span><span class="sc">\n</span><span class="st">Knokkelkoorts activiteit data__&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">kable_styling</span>(<span class="at">full_width =</span> F, <span class="at">bootstrap_options =</span> <span class="st">&quot;striped&quot;</span>, <span class="at">position =</span> <span class="st">&quot;left&quot;</span>, <span class="at">latex_options =</span> <span class="st">&quot;scale_down&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">column_spec</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; ">
<caption>
<span id="tab:unnamed-chunk-46">Table 8.1: </span><strong>De gapminder dataset samengevoegd met de Influenza en
Knokkelkoorts activiteit data</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
Country
</th>
<th style="text-align:right;">
Year
</th>
<th style="text-align:right;">
Influenza_activity
</th>
<th style="text-align:right;">
Dengue_activity
</th>
<th style="text-align:right;">
infant_mortality
</th>
<th style="text-align:right;">
life_expectancy
</th>
<th style="text-align:right;">
fertility
</th>
<th style="text-align:right;">
population
</th>
<th style="text-align:right;">
gdp
</th>
<th style="text-align:left;">
continent
</th>
<th style="text-align:left;">
region
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2002
</td>
<td style="text-align:right;font-weight: bold;">
NA
</td>
<td style="text-align:right;font-weight: bold;">
NA
</td>
<td style="text-align:right;font-weight: bold;">
17.1
</td>
<td style="text-align:right;">
74.3
</td>
<td style="text-align:right;">
2.38
</td>
<td style="text-align:right;">
37889443
</td>
<td style="text-align:right;">
242076212334
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2003
</td>
<td style="text-align:right;font-weight: bold;">
NA
</td>
<td style="text-align:right;font-weight: bold;">
NA
</td>
<td style="text-align:right;font-weight: bold;">
16.6
</td>
<td style="text-align:right;">
74.5
</td>
<td style="text-align:right;">
2.34
</td>
<td style="text-align:right;">
38309475
</td>
<td style="text-align:right;">
263468585945
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2004
</td>
<td style="text-align:right;font-weight: bold;">
8843
</td>
<td style="text-align:right;font-weight: bold;">
1.533
</td>
<td style="text-align:right;font-weight: bold;">
16.0
</td>
<td style="text-align:right;">
75.0
</td>
<td style="text-align:right;">
2.31
</td>
<td style="text-align:right;">
38728778
</td>
<td style="text-align:right;">
287258675094
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2005
</td>
<td style="text-align:right;font-weight: bold;">
8627
</td>
<td style="text-align:right;font-weight: bold;">
1.035
</td>
<td style="text-align:right;font-weight: bold;">
15.3
</td>
<td style="text-align:right;">
75.3
</td>
<td style="text-align:right;">
2.29
</td>
<td style="text-align:right;">
39145491
</td>
<td style="text-align:right;">
313626005874
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2006
</td>
<td style="text-align:right;font-weight: bold;">
8966
</td>
<td style="text-align:right;font-weight: bold;">
1.007
</td>
<td style="text-align:right;font-weight: bold;">
14.6
</td>
<td style="text-align:right;">
75.3
</td>
<td style="text-align:right;">
2.27
</td>
<td style="text-align:right;">
39558750
</td>
<td style="text-align:right;">
340177780212
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2007
</td>
<td style="text-align:right;font-weight: bold;">
10267
</td>
<td style="text-align:right;font-weight: bold;">
5.569
</td>
<td style="text-align:right;font-weight: bold;">
14.1
</td>
<td style="text-align:right;">
75.2
</td>
<td style="text-align:right;">
2.25
</td>
<td style="text-align:right;">
39969903
</td>
<td style="text-align:right;">
369614509411
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2008
</td>
<td style="text-align:right;font-weight: bold;">
9299
</td>
<td style="text-align:right;font-weight: bold;">
1.462
</td>
<td style="text-align:right;font-weight: bold;">
13.7
</td>
<td style="text-align:right;">
75.4
</td>
<td style="text-align:right;">
2.24
</td>
<td style="text-align:right;">
40381860
</td>
<td style="text-align:right;">
394594682115
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2009
</td>
<td style="text-align:right;font-weight: bold;">
7952
</td>
<td style="text-align:right;font-weight: bold;">
16.739
</td>
<td style="text-align:right;font-weight: bold;">
13.4
</td>
<td style="text-align:right;">
75.6
</td>
<td style="text-align:right;">
2.23
</td>
<td style="text-align:right;">
40798641
</td>
<td style="text-align:right;">
397949689763
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2010
</td>
<td style="text-align:right;font-weight: bold;">
6946
</td>
<td style="text-align:right;font-weight: bold;">
6.621
</td>
<td style="text-align:right;font-weight: bold;">
13.0
</td>
<td style="text-align:right;">
75.8
</td>
<td style="text-align:right;">
2.22
</td>
<td style="text-align:right;">
41222875
</td>
<td style="text-align:right;">
434405530244
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Argentina
</td>
<td style="text-align:right;font-weight: bold;">
2011
</td>
<td style="text-align:right;font-weight: bold;">
5541
</td>
<td style="text-align:right;font-weight: bold;">
3.186
</td>
<td style="text-align:right;font-weight: bold;">
12.7
</td>
<td style="text-align:right;">
76.0
</td>
<td style="text-align:right;">
2.20
</td>
<td style="text-align:right;">
41655616
</td>
<td style="text-align:right;">
472935255184
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(flu_dengue_gapminder)</span></code></pre></div>
<pre class="watch-out"><code>##    Country               Year      Influenza_activity Dengue_activity 
##  Length:406         Min.   :2002   Min.   :   106     Min.   : 0.073  
##  Class :character   1st Qu.:2005   1st Qu.:  3302     1st Qu.: 1.508  
##  Mode  :character   Median :2008   Median :  9214     Median : 4.303  
##                     Mean   :2008   Mean   : 23372     Mean   : 5.001  
##                     3rd Qu.:2012   3rd Qu.: 32278     3rd Qu.: 7.872  
##                     Max.   :2015   Max.   :155577     Max.   :16.739  
##                                    NA&#39;s   :72         NA&#39;s   :354     
##  infant_mortality life_expectancy   fertility       population       
##  Min.   : 2.000   Min.   :64.70   Min.   :1.150   Min.   :  3324096  
##  1st Qu.: 3.700   1st Qu.:74.17   1st Qu.:1.420   1st Qu.:  9072979  
##  Median : 5.850   Median :78.25   Median :1.755   Median : 20977828  
##  Mean   : 9.641   Mean   :77.20   Mean   :1.838   Mean   : 42737637  
##  3rd Qu.:13.325   3rd Qu.:80.80   3rd Qu.:1.990   3rd Qu.: 46527412  
##  Max.   :53.700   Max.   :83.20   Max.   :3.980   Max.   :207847528  
##  NA&#39;s   :42       NA&#39;s   :42      NA&#39;s   :42      NA&#39;s   :42         
##       gdp             continent            region         
##  Min.   :7.214e+09   Length:406         Length:406        
##  1st Qu.:5.680e+10   Class :character   Class :character  
##  Median :2.616e+11   Mode  :character   Mode  :character  
##  Mean   :5.748e+11                                        
##  3rd Qu.:6.370e+11                                        
##  Max.   :5.218e+12                                        
##  NA&#39;s   :146</code></pre>
<p>Tijd om de daadwerkelijke data te gaan analyseren. Ik wil eerst een overzicht van per jaar, per land de gemiddelde Influenza activiteit, Knokkelkoorts activiteit, kindersterfte, levensverwachting, geboorten en populatie over de periode van 2002 tot 2015.</p>
<p>Ik verwacht dat er meer kindersterfte heeft plaatsgevonden in landen waarin in een bepaald jaar de Influenza of Knokkelkoorts activiteit hoog was.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bereken de gemiddelden van de variabelen per jaar en land:</span></span>
<span id="cb121-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-2" aria-hidden="true" tabindex="-1"></a>FLU <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_Influenza_act =</span> <span class="fu">mean</span>(Influenza_activity))</span>
<span id="cb121-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-3" aria-hidden="true" tabindex="-1"></a>DENG <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_Knokkelkoorts_act =</span> <span class="fu">mean</span>(Dengue_activity))</span>
<span id="cb121-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-4" aria-hidden="true" tabindex="-1"></a>MORT <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_kindersterfte =</span> <span class="fu">mean</span>(infant_mortality))</span>
<span id="cb121-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-5" aria-hidden="true" tabindex="-1"></a>LIFE <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_levensverwachting=</span> <span class="fu">mean</span>(life_expectancy))</span>
<span id="cb121-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-6" aria-hidden="true" tabindex="-1"></a>FERT <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_geboorten =</span> <span class="fu">mean</span>(fertility))</span>
<span id="cb121-7"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-7" aria-hidden="true" tabindex="-1"></a>POPU <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Country, Year) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Gem_populatie =</span> <span class="fu">mean</span>(population))</span>
<span id="cb121-8"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-9"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Voeg de gemiddelden samen tot een tabel:</span></span>
<span id="cb121-10"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-10" aria-hidden="true" tabindex="-1"></a>desc_stat <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(Country, Year) <span class="sc">%&gt;%</span> unique <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(FLU, DENG, MORT, LIFE, FERT, POPU) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Year)</span>
<span id="cb121-11"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-12"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Voorbeeld van laatste 10 rijen:</span></span>
<span id="cb121-13"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Om één of andere reden verhelpt &#39;latex_options = &quot;scale_down&quot;&#39; niet het buiten de marges vallen van de tabel...</span></span>
<span id="cb121-14"><a href="vaardigheid-6-werken-met-relational-databases.html#cb121-14" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(<span class="fu">tail</span>(desc_stat, <span class="dv">10</span>), <span class="at">caption =</span> <span class="st">&quot;__Per jaar, per land de gemiddelden van de gemeten variabelen__&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">kable_styling</span>(<span class="at">full_width =</span> F, <span class="at">bootstrap_options =</span> <span class="st">&quot;striped&quot;</span>, <span class="at">position =</span> <span class="st">&quot;left&quot;</span>, <span class="at">latex_options =</span> <span class="st">&quot;scale_down&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">column_spec</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<table class="table table-striped" style="width: auto !important; ">
<caption>
<span id="tab:unnamed-chunk-47">Table 8.2: </span><strong>Per jaar, per land de gemiddelden van de gemeten variabelen</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;">
Country
</th>
<th style="text-align:right;">
Year
</th>
<th style="text-align:right;">
Gem_Influenza_act
</th>
<th style="text-align:right;">
Gem_Knokkelkoorts_act
</th>
<th style="text-align:right;">
Gem_kindersterfte
</th>
<th style="text-align:right;">
Gem_levensverwachting
</th>
<th style="text-align:right;">
Gem_geboorten
</th>
<th style="text-align:right;">
Gem_populatie
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;">
Poland
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
1956
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
77.6
</td>
<td style="text-align:right;">
1.44
</td>
<td style="text-align:right;">
38611794
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Romania
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
23679
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
9.7
</td>
<td style="text-align:right;">
75.2
</td>
<td style="text-align:right;">
1.45
</td>
<td style="text-align:right;">
19511324
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Russia
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
21447
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
8.2
</td>
<td style="text-align:right;">
71.0
</td>
<td style="text-align:right;">
1.61
</td>
<td style="text-align:right;">
143456918
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
South.Africa
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
98940
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Spain
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
4863
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
82.6
</td>
<td style="text-align:right;">
1.53
</td>
<td style="text-align:right;">
46121699
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Sweden
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
328
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:right;">
82.1
</td>
<td style="text-align:right;">
1.93
</td>
<td style="text-align:right;">
9779426
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Switzerland
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
6390
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
83.0
</td>
<td style="text-align:right;">
1.55
</td>
<td style="text-align:right;">
8298663
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Ukraine
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
12101
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
71.5
</td>
<td style="text-align:right;">
1.49
</td>
<td style="text-align:right;">
44823765
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
United.States
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
61295
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;">
Uruguay
</td>
<td style="text-align:right;font-weight: bold;">
2015
</td>
<td style="text-align:right;">
4195
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
8.7
</td>
<td style="text-align:right;">
76.8
</td>
<td style="text-align:right;">
2.03
</td>
<td style="text-align:right;">
3431555
</td>
</tr>
</tbody>
</table>
<p>Ik ben A) geïnteresseerd in de trends van Influenza en Knokkelkoorts activiteit door de jaren heen en wil B) het verband tussen deze activiteit en kindersterfte toetsen.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-48"></span>
<img src="_main_files/figure-html/unnamed-chunk-48-1.png" alt="__Influenza activiteit door de jaren heen.__ Voor 29 landen het aantal Influenza gevallen van 2002 tot en met 2015." width="120%" />
<p class="caption">
Figure 8.1: <strong>Influenza activiteit door de jaren heen.</strong> Voor 29 landen het aantal Influenza gevallen van 2002 tot en met 2015.
</p>
</div>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-49"></span>
<img src="_main_files/figure-html/unnamed-chunk-49-1.png" alt="__Knokkelkoorts activiteit door de jaren heen__. Voor 4 landen het aantal Knokkelkoorts gevallen van 2002 tot en met 2015." width="120%" />
<p class="caption">
Figure 8.2: <strong>Knokkelkoorts activiteit door de jaren heen</strong>. Voor 4 landen het aantal Knokkelkoorts gevallen van 2002 tot en met 2015.
</p>
</div>
<p>Figuur 8.1 laat voor vrijwel alle landen twee grote pieken in Influenza activiteit zien in 2009 en 2014. Figuur 8.2 laat één grote piek in Knokkelkoorts activiteit zien in 2009 voor de vier bijgehouden landen.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verband tussen Influenza activiteit en kindersterfte</span></span>
<span id="cb122-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter missende waarden weg:</span></span>
<span id="cb122-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb122-3" aria-hidden="true" tabindex="-1"></a>fdg3 <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Influenza_activity <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> infant_mortality <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb122-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Voer correlatie test uit:</span></span>
<span id="cb122-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(fdg3<span class="sc">$</span>Influenza_activity, fdg3<span class="sc">$</span>infant_mortality, <span class="at">method=</span><span class="fu">c</span>(<span class="st">&quot;pearson&quot;</span>)) <span class="co">#p-value = 0.6713, geen stat. sig. verband</span></span></code></pre></div>
<pre class="watch-out"><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  fdg3$Influenza_activity and fdg3$infant_mortality
## t = 0.42482, df = 301, p-value = 0.6713
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.08844289  0.13677987
## sample estimates:
##       cor 
## 0.0244791</code></pre>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-51"></span>
<img src="_main_files/figure-html/unnamed-chunk-51-1.png" alt="__Per land het verband tussen Influenza activiteit en kindersterfte door de jaren heen__. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Influenza gevallen en de sterfte onder kinderen gemeten." width="120%" />
<p class="caption">
Figure 8.3: <strong>Per land het verband tussen Influenza activiteit en kindersterfte door de jaren heen</strong>. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Influenza gevallen en de sterfte onder kinderen gemeten.
</p>
</div>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="vaardigheid-6-werken-met-relational-databases.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verband tussen Knokkelkoorts activiteit en kindersterfte</span></span>
<span id="cb124-2"><a href="vaardigheid-6-werken-met-relational-databases.html#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter missende waarden weg:</span></span>
<span id="cb124-3"><a href="vaardigheid-6-werken-met-relational-databases.html#cb124-3" aria-hidden="true" tabindex="-1"></a>fdg4 <span class="ot">&lt;-</span> flu_dengue_gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Dengue_activity <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> infant_mortality <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb124-4"><a href="vaardigheid-6-werken-met-relational-databases.html#cb124-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-5"><a href="vaardigheid-6-werken-met-relational-databases.html#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Voer correlatie test uit:</span></span>
<span id="cb124-6"><a href="vaardigheid-6-werken-met-relational-databases.html#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(fdg4<span class="sc">$</span>Dengue_activity, fdg4<span class="sc">$</span>infant_mortality, <span class="at">method=</span><span class="fu">c</span>(<span class="st">&quot;pearson&quot;</span>)) <span class="co">#p-value = 0.0008, wel stat. sig. verband</span></span></code></pre></div>
<pre class="watch-out"><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  fdg4$Dengue_activity and fdg4$infant_mortality
## t = -3.5682, df = 50, p-value = 0.000804
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.6442119 -0.2025123
## sample estimates:
##        cor 
## -0.4505146</code></pre>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-53"></span>
<img src="_main_files/figure-html/unnamed-chunk-53-1.png" alt="__Per land het verband tussen Knokkelkoorts acitviteit en kindersterfte door de jaren heen__. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Knokkelkoorts gevallen en de sterfte onder kinderen gemeten." width="120%" />
<p class="caption">
Figure 8.4: <strong>Per land het verband tussen Knokkelkoorts acitviteit en kindersterfte door de jaren heen</strong>. Voor 29 landen is van 2002 tot en met 2015 per jaar het aantal Knokkelkoorts gevallen en de sterfte onder kinderen gemeten.
</p>
</div>
<p><strong>Conclusie</strong><br>
Figuren 8.1 en 8.2 laten een min of meer overeenkomend patroon zien, misschien wordt de activiteit van de virussen door één of meerdere dezelfde parameters beïnvloed.</p>
<p>Gebaseerd op de correlatie coëfficienten van 0.02 en -0.45 voor respectievelijk een verband tussen kindersterfte en Inlfuenza activiteit en kindersterfte en Knokkelkoorts activiteit, lijkt er geen positief (of negatief) verband te zijn tussen uitbraken van deze virussen en kindersterfte.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vaardigheid-5-correct-refereren-m.b.v.-een-reference-manager.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="vaardigheid-7-een-r-package-maken.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
